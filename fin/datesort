#!/usr/bin/env python
import sys
import re

header = ''
lines = []

with open(sys.argv[1], 'rt') as f:
    for l in f:
        # Remove trailing whitespace
        l = l.rstrip()
        
        # Check if line starts with "Account"
        if re.search(r'Account', l):
            header = f"Date,{l}"
            continue
        
        # Check for lines containing ", -[A-Z]+(\d+)"
        match = re.search(r',\s*-[A-Z]+(\d+)', l)
        if match:
            lines.append(f"{match.group(1)},{l}")

# Sort lines numerically based on the captured number
lines.sort(key=lambda x: int(x.split(',')[0]))

# Print header and sorted lines
print(header)
for l in lines:
    print(l)
