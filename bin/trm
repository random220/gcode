#!/bin/bash

doit() {
    echo "$1"
    bash -c "$1"
}

trmd() {
    for i in "$@"; do
        doit "transmission-remote -t $i -r"
    done
}
trmD() {
    for i in "$@"; do
        doit "transmission-remote -t $i -rad"
    done
}
trma() {
    for i in "$@"; do
        doit "transmission-remote -a \"$i\""
    done
}
list_currents() {
    transmission-remote -l | grep -v ID|awk '{print $1}'
}
trms() {
    if  [[ "$1" = 'a' ]]; then
        nums=($(list_currents))
    else
        nums=("$@")
    fi
    for i in "${nums[@]}"; do
        doit "transmission-remote -t \"$i\" -s"
    done
}
trmS() {
    if  [[ "$1" = 'a' ]]; then
        nums=($(list_currents))
    else
        nums=("$@")
    fi
    for i in "${nums[@]}"; do
        doit "transmission-remote -t \"$i\" -S"
    done
}
trml() {
    doit 'transmission-remote -l'
}
trmX() {
    doit 'transmission-remote --exit'
}

case "$1" in
  d)
    shift
    trmd "$@"
    ;;
  D)
    shift
    trmD "$@"
    ;;
  a)
    shift
    trma "$@"
    ;;
  l)
    shift
    trml "$@"
    ;;
  x)
    shift
    trmX "$@"
    ;;
  S)
    shift
    trmS "$@"
    ;;
  s)
    shift
    trms "$@"
    ;;
  *)
    ;;
esac
