#!/bin/bash

if [[ $(uname) != Darwin ]]; then
    exit 0
fi

pkill -f chime
if [[ "$(basename "$0")" == nochime ]] ; then
    exit 0
fi

soundpre=/System/Library/Sounds/Sosumi.aiff
sound00=/System/Library/Sounds/Glass.aiff
sound15=/System/Library/Sounds/Ping.aiff
sound30=/System/Library/Sounds/Hero.aiff
sound45=/System/Library/Sounds/Blow.aiff
(
while true; do
    min=$(date +%M)
    case $min in
      "00" | "15" | "30" | "45" )
        afplay $soundpre
        afplay $(eval echo \$sound$min)
        ;;
    esac
    sleep 60
done
) >/dev/null 2>&1 &

