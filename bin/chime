#!/bin/bash

if [[ $(uname) != Darwin ]]; then
    exit 0
fi

pkill -f chime
if [[ "$(basename "$0")" == nochime ]] ; then
    exit 0
fi

sound00=/System/Library/Sounds/Glass.aiff
sound15=/System/Library/Sounds/Ping.aiff
sound30=/System/Library/Sounds/Hero.aiff
sound45=/System/Library/Sounds/Blow.aiff
(
while true; do
    min=$(date +%M)
    if [[ $min == '00' ]]; then
        afplay $sound00
    elif [[ $min == '15' ]]; then
        afplay $sound15
    elif [[ $min == '30' ]]; then
        afplay $sound30
    elif [[ $min == '45' ]]; then
        afplay $sound45
    fi
    sleep 60
done
) >/dev/null 2>&1 &
