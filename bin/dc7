#!/bin/bash

set -x

exists='no'
running='no'


n=$(docker ps -q --filter "name=c7"|wc -l|sed 's/ //g')
if [[ $n != 0 ]]; then
  running='yes'
fi

if [[ $running == 'no' ]]; then
  n=$(docker ps -aq --filter "name=c7"|wc -l|sed 's/ //g')
  if [[ $n != 0 ]]; then
    exists='yes'
  fi
  if [[ $exists == 'no' ]]; then
    docker run -itd -h c7 --name c7 --mount type=bind,source=$HOME/b/,target=/b centos:7
    exists='yes'
    running='yes'
  else
    docker start c7
    running='yes'
  fi
fi

docker exec -ti c7 bash


