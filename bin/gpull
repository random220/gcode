#!/bin/bash

if [[ "$1" == '-h' ]]; then
    echo "$0 -h"
    echo "$0 -p"
    echo "$0 [seconds]"
    exit 0
fi

umask 077

>&2 echo 'Github password for random220' 
echo

d=$(mktemp -d)
#gzip -9 <gp.sh >gp.sh.gz
#openssl enc -in gp.sh.gz -out gp.sh.gz.enc.b64 -base64 -aes256 -iter 12 >/dev/null 2>&1

cat <<'EOF' >"$d/gp.sh.gz.enc.b64"
U2FsdGVkX1+FCtEQNagau8IFJWOIb52708muFHNw2Axx4yH4NB3y+75aYrGF0ahe
YSjy4Hm5+0ihNz1zsrw1nzqTspHg86vTMgpUKWfkajw1strsZqPXm4BpItr8wFH9
4HBH68AXb3ilmZQyEgBY25V7XpPI1HL165f1/EatA0ZZ6KVEOyIYUGL9O3vIZOt/
eI8o3ngaR9jWJHQtbA2/n5c+usV/nX90Lj8abJsYohij8WaLRZ4SNGfp1CfR582u
pQtwkb9jbEpkG3XTPllaZc0AmM2RXExSkQtZbB5t8w2AbloaFcq6vS4ygjTK/vlh
3bWgF260bDcyhZ7uIHDvSVUy0hf4G5kjQ/0H7ghNbI4/4nB3tcBUQR7hgtL9fVNN
cef1WtCHB6kclJ6JlGbz5O015N/WcecHMhecll+QznNvCATb0+51RNEqulTxe9lt
do9AkJz++Rp11aFmZPmyfwcNNR9ypD9Pq0yq2qhF5zVwQ/j2WxgVwMzuh/GeFt2t
ROEEXuRNsUcwWqevfTcmvCi0f7lU3ljSZiwa2q95F5Ud5aObgpesx+hsgFa/GmlU
iDcX7aDtO0R3wmnrX3g4bFaO+RedSck2B545ph3130bV+fnw3z0X3/3mEaNQNmKv
j38frRkn62+rYjqFVWSRxsleE9NnqmCMFuFkptqRIkfMLmxcWn2G0Ev5YK6F+dAp
ZMwOvmIENvbe0LZ5dwWcV9wDEi4kH3HNGdWra8eJ349HWyIl608jbKhivZ5ushPt
U5HWYH32su2qFNax0TJIMaOyW6YHoZsF/p1ak+6ZUW06BpnLRwYwgwRWOWo1ULhU
5wN8fRIrm3e9Y8Yg4s5AFMyWTsb+OYPX5ebQ+WX2oHPRME7Q7y7WleGlNwAocBYS
wnRWw7KVcQ7LQ2wx1XI+8Pnqf54/ligW6JkG+zudkpV7TN5XUQ4FcFcNFOai/+5d
ouIOqzPbaRQGuYjspOqXdS5eSYHj/IxWmqLz6Y3R7QUE6OAaz89S3gcC7FhJTCYi
H4jA3cN7+r6KQ1u8RJWPbgGy2yLzqXY/YKG1YdFqoq0JxII7B4sUVICBu6MtIkou
wKHvyNxEBfK2n+jbUTid32qFXZkFZvsC3796DsuxhguL/HESU9oILirKGrjJCxd9
DDaZ/iXxHfqNuW81Sb2KD8JHAsO/2kEEBrB5JWYTgGGrrYc9pObCSxvlomWj8HUi
PGPxZ4T2CroGLBZ5M1YWPUsF0Zlse5voSpKQvUNoQoXbSNq5Jwwoui0+99V4Sqre
EOF

openssl enc -d -in "$d/gp.sh.gz.enc.b64" -out "$d/gp.sh.gz" -base64 -aes256 -iter 12 >/dev/null 2>&1
if [[ $? != 0 ]]; then
    rm -rf "$d"
    exit 1
fi

gunzip "$d/gp.sh.gz"

if [[ "$1" == '-p' ]]; then
    cat "$d/gp.sh"
else
    /bin/bash "$d/gp.sh"
fi
cd
rm -rf "$d"
