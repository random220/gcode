#!/bin/bash

myname=$(basename "$0")

main() {
    if [[ "$1" != '' ]]; then
        help
        exit
    else
        doit
    fi
}

help() {
cat <<'EOF'

# better auth
# https://github.com/astrada/google-drive-ocamlfuse/wiki/Authorization

## google-drive-ocamlfuse -id 12345678.apps.googleusercontent.com -secret abcde12345

# original doc
# https://medium.com/@enthu.cutlet/how-to-mount-google-drive-on-linux-windows-systems-5ef4bff24288

sudo add-apt-repository ppa:alessandro-strada/ppa
sudo apt update && sudo apt install google-drive-ocamlfuse

google-drive-ocamlfuse

mkdir ~/G
google-drive-ocamlfuse ~/G
fusermount -u ~/G





EOF
}

doit() {
type google-drive-ocamlfuse >/dev/null 2>&1
if [[ $? != 0 ]]; then
    echo
    echo "Need to install google-drive-ocamlfuse"
    echo
    sudo add-apt-repository -y ppa:alessandro-strada/ppa
    sudo apt-get -y update
    sudo apt-get -y install google-drive-ocamlfuse
fi

mkdir -p ~/G
if [[ "$myname" == 'gmount' ]]; then
    google-drive-ocamlfuse ~/G
elif [[ "$myname" == 'gumount' ]]; then
    fusermount -u ~/G
else
    echo
    echo "Application name should be gmount or gumount"
    echo
    exit 1
fi
}

main "$@"


