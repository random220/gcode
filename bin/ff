#!/bin/bash

ff=/Applications/Firefox.app/Contents/MacOS/firefox

if [[ -f $ff ]]; then
  :
else
  exit 1
fi

bn=$(basename "$0")
ddir=~/.firefox/$bn
mkdir -p $ddir

if [[ $bn == 'ff' ]]; then
  cat <<EOF|openssl enc -d -base64|(cd ~/ && tar xfz -)
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
EOF
  nohup bash -c "'$ff' --profile $ddir; rm -rf $ddir" >/dev/null 2>&1 &
else
  nohup bash -c "'$ff' --profile $ddir" >/dev/null 2>&1 &
fi


