<!DOCTYPE html>
<html>
  <head>
    <title>WebSocket demo</title>
  </head>
  <body>
    <script>
      var connection  = new WebSocket("ws://localhost:5678/")
      var output_list = document.createElement('ol')

      //connection.onmessage = function(e) {
      //or, equivalently
      //connection.onmessage = (e) => {

      connection.onopen = function(e) {
        connection.send('hi')
        connection.send('ho')
      }
      connection.onmessage = function(e) {
        var content_received = document.createTextNode(e.data)

        var message_lines_so_far = document.getElementsByTagName('ol')[0]
        var new_message_line     = document.createElement('li')
        new_message_line.appendChild(content_received);
        message_lines_so_far.appendChild(new_message_line);
      }
      document.body.appendChild(output_list)
    </script>
  </body>
</html>
