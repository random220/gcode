Sun Oct 23 14:22:30 PDT 2022
#https://www.openldap.org/doc/admin26/quickstart.html
https://ubuntu.com/server/docs/service-ldap

docker run -itd --name ldap -h ldap ubuntu:22.04
docker exec -it ldap su -
apt-get -y update; apt-get -y dist-upgrade
apt-get -y install slapd ldap-utils
    Administrator password: welcome
==> did not work. needs runlevel etc because wants to install as service

-----
Setting up slapd (2.5.13+dfsg-0ubuntu0.22.04.1) ...
debconf: unable to initialize frontend: Dialog
debconf: (No usable dialog-like program is installed, so the dialog based frontend cannot be used. at /usr/share/perl5/Debconf/FrontEnd/Dialog.pm line 78.)
debconf: falling back to frontend: Readline
  Creating new user openldap... done.
  Creating initial configuration... done.
  Creating LDAP directory... done.
invoke-rc.d: could not determine current runlevel
invoke-rc.d: policy-rc.d denied execution of start.
Processing triggers for libc-bin (2.35-0ubuntu3.1) ...
-----



Go with prepackaged stuff
https://computingforgeeks.com/run-openldap-server-in-docker-containers/

#rm -rf ~/slapd-data

docker run \
    -itd \
	--name openldap-server \
	-p 1389:389 \
	-p 1636:636 \
	--hostname omldap.purestorage.com \
	--env LDAP_ORGANISATION="Fake Purestorage" \
	--env LDAP_DOMAIN="purestorage.com" \
	--env LDAP_ADMIN_PASSWORD="StrongAdminPassw0rd" \
	--env LDAP_BASE_DN="dc=purestorage,dc=com" \
	--volume ~/data/slapd/database:/var/lib/ldap \
	--volume ~/data/slapd/config:/etc/ldap/slapd.d \
    osixia/openldap:latest

docker run \
    -itd \
    --name phpldapadmin \
    -p 1080:80 \
    -p 1443:443 \
    --hostname phpldapadmin-service \
    --link openldap-server:ldap-host \
    --env PHPLDAPADMIN_LDAP_HOSTS=omldap.purestorage.com \
    osixia/phpldapadmin:latest

https://localhost:1443

Login DN = cn=admin,dc=purestorage,dc=com
Password = StrongAdminPassw0rd

See omandal.txt for the fields you need

https://bitbucket.purestorage.com/users/omandal/repos/tools/browse/ghe-migration/docs/howto-setup-ldap-authentication-screenshots/01.png?at=refs%2Fheads%2Fwip
Host:               ldap.purestorage.com 389 StartTLS
Domain search user: CN=Om Mandal,OU=70000-iridium,OU=Workday,OU=Okta,OU=PSUsers,DC=purestorage,DC=com
Domain base:        DC=purestorage,DC=com

docker run \
    -itd \
    --name real \
    --hostname real \
    -p 2080:80 \
    -p 2443:443 \
    --env PHPLDAPADMIN_LDAP_HOSTS=ldap.purestorage.com \
    osixia/phpldapadmin:latest

https://localhost:2443

Login DN:  CN=Om Mandal,OU=70000-iridium,OU=Workday,OU=Okta,OU=PSUsers,DC=purestorage,DC=com
Password: My ldap password

---

gh auth login




